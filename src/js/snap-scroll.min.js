/*
* SnapScroll v1.1.0 Copyright (c) 2018 AJ Savino
* https://github.com/koga73/SnapScroll
* MIT License
*/
!function(o){function t(e){var n=null,t={callbackDelay:300,_lastOrientation:window.orientation,_timeout:0},i={init:function(){window.addEventListener?(window.addEventListener("resize",i._handler_resize,!1),window.addEventListener("orientationchange",i._handler_resize,!1)):window.attachEvent&&(window.attachEvent("onresize",i._handler_resize),window.attachEvent("onorientationchange",i._handler_resize))},destroy:function(){var e=t._timeout;e&&(clearTimeout(e),t._timeout=0),n.onResize=null,window.removeEventListener?(window.removeEventListener("resize",i._handler_resize),window.removeEventListener("orientationchange",i._handler_resize)):window.detachEvent&&(window.detachEvent("onresize",i._handler_resize),window.detachEvent("onorientationchange",i._handler_resize))},getWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},getHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},_handler_resize:function(){if("onorientationchange"in window){var e=window.orientation;if(e==t._lastOrientation)return;t._lastOrientation=e}t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(i._handler_timeout,n.callbackDelay)},_handler_timeout:function(){clearTimeout(t._timeout),t._timeout=0,n.onResize(n.getWidth(),n.getHeight())}};for(var o in n={callbackDelay:t.callbackDelay,init:i.init,destroy:i.destroy,getWidth:i.getWidth,getHeight:i.getHeight,onResize:null},e)n[o]=e[o];return n.init(),n}o.fn.SnapScroll=function(e){var s=null,n={useClasses:!0,classVisible:"snap-scroll-visible",classActive:"snap-scroll-active",scrollDelay:300,wheelDelay:75,animateTime:250,animateTimeBuffer:100,snapTop:!0,snapBottom:!0,snaps:[]};o.fn.SnapScroll.defaults=n;var r={_$this:this,_resizer:null,_snaps:null,_scrollTimeout:0,_wheelTimeout:0,_wheelDir:0,_currentSnapIndex:-1,_lastAnimateTime:0},i={init:function(){r._resizer=new t({onResize:i._handler_resize}),i._handler_resize(),o(document).on("scroll",i._handler_document_scroll),o(document).on("keydown",i._handler_document_keydown),o(window).on("DOMMouseScroll mousewheel wheel",i._handler_window_mousewheel)},destroy:function(){r._resizer&&(r._resizer.destroy(),r._resizer=null),o(document).off("scroll",i._handler_document_scroll),o(document).off("keydown",i._handler_document_keydown),o(window).off("DOMMouseScroll mousewheel wheel",i._handler_window_mousewheel),r._snaps=null,r._scrollTimeout&&(clearTimeout(r._scrollTimeout),r._scrollTimeout=0),r._wheelTimeout&&(clearTimeout(r._wheelTimeout),r._wheelTimeout=0),r._wheelDir=0,r._currentSnapIndex=-1,r._lastAnimateTime=0},snapClosest:function(){for(var e=document.documentElement.scrollTop,n=-1,t=-1,i=r._snaps,o=i.length,a=0;a<o;a++){var l=Math.abs(i[a]-e);(-1==t||l<t)&&(t=l,n=a)}s.snapIndex(n)},snapPrev:function(){s.snapIndex(r._currentSnapIndex-1)},snapNext:function(){s.snapIndex(r._currentSnapIndex+1)},snapIndex:function(e){e=Math.min(Math.max(e,0),r._snaps.length-1),r._currentSnapIndex=e;var n=r._snaps[e];if(s.useClasses){var t=null;r._$this.each(function(){var e=o(this);e.removeClass(s.classActive),t||e.offset().top==n&&(t=e)}),t&&t.addClass(s.classActive),i._evalVisibility()}i._scrollTo(n)},getSnapIndex:function(){return r._currentSnapIndex},update:function(){var e=s.snaps.concat(),t=o(document).height()-window.innerHeight;return r._$this.each(function(){e.push(o(this).offset().top)}),s.snapTop&&e.push(0),s.snapBottom&&e.push(t),(e=e.reduce(function(e,n){return-1==e.indexOf(n)&&n<=t&&e.push(n),e},[])).sort(i._sortNumeric),r._snaps=e,r._snaps},isVisible:function(e){var n=e.offset().top,t=n+e.height(),i=document.documentElement.scrollTop,o=i+window.innerHeight;return i<=n&&n<o||i<t&&t<=o},_evalVisibility:function(){r._$this.each(function(){var e=o(this);s.isVisible(e)?e.addClass(s.classVisible):e.removeClass(s.classVisible)})},_sortNumeric:function(e,n){return e-n},_handler_document_scroll:function(e){s.useClasses&&i._evalVisibility(),r._scrollTimeout&&clearTimeout(r._scrollTimeout);var n=r._lastAnimateTime+s.animateTime+s.animateTimeBuffer-(new Date).getTime();r._scrollTimeout=setTimeout(i._handler_scroll_timeout,Math.max(s.scrollDelay,n))},_handler_scroll_timeout:function(){clearTimeout(r._scrollTimeout),r._scrollTimeout=0,s.snapClosest()},_scrollTo:function(e){if(document.documentElement.scrollTop!=e){r._lastAnimateTime=(new Date).getTime();var n=o("html,body");n.stop(!0),n.animate({scrollTop:e},s.animateTime)}},_handler_window_mousewheel:function(e){e.preventDefault(),r._wheelTimeout&&clearTimeout(r._wheelTimeout),r._wheelTimeout=setTimeout(i._handler_wheel_timeout,s.wheelDelay);var n=Math.max(-1,Math.min(1,e.originalEvent.deltaY||e.originalEvent.wheelDelta||-e.originalEvent.detail));return r._wheelDir=Math.abs(n)/n,!1},_handler_wheel_timeout:function(){clearTimeout(r._wheelTimeout),r._wheelTimeout=0,r._wheelDir<0?s.snapPrev():0<r._wheelDir&&s.snapNext()},_handler_document_keydown:function(e){switch(e.keyCode){case 38:s.snapPrev();break;case 40:s.snapNext()}},_handler_resize:function(e,n){s.update(),-1==r._currentSnapIndex?s.snapClosest():s.snapIndex(r._currentSnapIndex)}};return(s=o.extend({init:i.init,destroy:i.destroy,snapClosest:i.snapClosest,snapPrev:i.snapPrev,snapNext:i.snapNext,snapIndex:i.snapIndex,getSnapIndex:i.getSnapIndex,update:i.update,isVisible:i.isVisible},n,e)).init(),s}}(jQuery);